<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">

    <title>你应该试试这个科学上网工具clash-node</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="https:&#x2F;&#x2F;blog.kingrong.kr&#x2F;main.css">

    

    
    
</head>
<body>
    <a class="skip-main" href="#main">Skip to content</a>
    <div class="container">
        <header> 
            <h1 class="site-header">
                <a href="https:&#x2F;&#x2F;blog.kingrong.kr">kingrong&#x27;s blog</a>
            </h1>
            <nav>
                
                
                
                <a  href="https:&#x2F;&#x2F;blog.kingrong.kr&#x2F;">Home</a>
                
                
                <a  href="https:&#x2F;&#x2F;blog.kingrong.kr&#x2F;categories">Categories</a>
                
                
                <a  href="https:&#x2F;&#x2F;blog.kingrong.kr&#x2F;tags&#x2F;">Tags</a>
                
                
                <a  href="https:&#x2F;&#x2F;blog.kingrong.kr&#x2F;about&#x2F;">About</a>
                
                
            </nav>
        </header>

        <!-- 目录 -->
        <div> 
    <aside id="toc-aside" class="right-to-left">
        <h2>Table of Contents</h2>
        <ul>
             <li>
                <a href="https://blog.kingrong.kr/clash-node-instruction/#jie-shao">介绍</a>
                
            </li>  <li>
                <a href="https://blog.kingrong.kr/clash-node-instruction/#yi-lai">依赖</a>
                
            </li>  <li>
                <a href="https://blog.kingrong.kr/clash-node-instruction/#an-zhuang">安装</a>
                
            </li>  <li>
                <a href="https://blog.kingrong.kr/clash-node-instruction/#shi-yong">使用</a>
                 <ul>
                    
                        <li>
                            <a href="https://blog.kingrong.kr/clash-node-instruction/#ding-yue-lian-jie">订阅链接</a>
                        </li>
                         <ul>
                            <li>
                                <a href="#tian-jia-ding-yue">添加订阅</a>
                            </li><li>
                                <a href="#geng-xin-ding-yue">更新订阅</a>
                            </li>
                        </ul> 
                    
                        <li>
                            <a href="https://blog.kingrong.kr/clash-node-instruction/#yun-xing-clash">运行clash</a>
                        </li>
                        
                    
                        <li>
                            <a href="https://blog.kingrong.kr/clash-node-instruction/#pei-zhi">配置</a>
                        </li>
                        
                    
                </ul> 
            </li>  <li>
                <a href="https://blog.kingrong.kr/clash-node-instruction/#gan-xie">感谢</a>
                
            </li>  <li>
                <a href="https://blog.kingrong.kr/clash-node-instruction/#jie-shu">结束</a>
                
            </li> 
            <li class="toc-comments-link"><a href="#Comments">Comments</a></li>
        </ul>
    </aside>
 </div>

        <main id="main" tabindex="-1">
            

<article class="post">
    <header>
        <h1>你应该试试这个科学上网工具clash-node</h1>
    </header>
    <div class="content">
        <p>我觉得使用linux的你应该尝试一下使用这个工具科学上网，自从ssr发展了科学上网节点的订阅形式之后，各大的机场都支持了订阅，由于日渐增高的墙，许许多多的科学上网的工具也都层出不穷，但不是所有工具都支持订阅链接导入的方式获取节点，许多的工具还都只能够手动更改配置运行，尤其是对linux的用户来说。<a href="https://github.com/Dreamacro/clash">clash</a>是其中一款，非常棒的工具，我正在使用它，但没有linux下的支持订阅的实现。
所以我写了一个工具<a href="https://github.com/kingrongH/clash-node">clash-node</a>，支持订阅链接。</p>
<span id="continue-reading"></span><h2 id="jie-shao">介绍</h2>
<p>这个工具是使用Node.js + typescript 完成了一个clash的包装, 实现订阅链接的一个功能，核心的代理功能还是由<a href="https://github.com/Dreamacro/clash">clash</a> 来实现的。当然它不仅仅是只有订阅链接的功能，那样的话我们使用的人会无从下手的，我正是从我日常使用的一个角度来考虑如何设计这个功能的。他还可以直接开启和关闭clash的功能，以及正在测试的切换链接的功能。</p>
<h2 id="yi-lai">依赖</h2>
<ol>
<li>Node.js</li>
</ol>
<p>最好是10及以上的版本，推荐使用<code>nvm</code>来管理和安装nodejs</p>
<p><a href="https://github.com/nvm-sh/nvm">nvm</a></p>
<ol start="2">
<li>npm or cnpm or yarn</li>
</ol>
<p>你可以使用你想要用的那一个node.js包管理器。
中国用户推荐使用<code>cnpm</code></p>
<ol start="3">
<li>typescript</li>
</ol>
<p>你需要有<code>typescript</code>的支持。
通过</p>
<pre style="background-color:#1e1e1e;">
<code>npm install -g typescript
</code></pre>
<p>来完成一个全局的安装，如果你只想要本地安装的话：</p>
<pre style="background-color:#1e1e1e;">
<code>npm install typescript
</code></pre><h2 id="an-zhuang">安装</h2>
<p>现在来说只能通过<code>github</code>进行安装。</p>
<pre style="background-color:#1e1e1e;">
<code class="language-shell" data-lang="shell"><span style="color:#dcdcdc;">git clone https://github.com/kingrongH/clash-node
cd clash-node
npm install
npm build
</span></code></pre><h2 id="shi-yong">使用</h2>
<p>工具本身使用是符合日常用户的使用习惯的。只需要通过终端运行一些命令即可。</p>
<h3 id="ding-yue-lian-jie">订阅链接</h3>
<h4 id="tian-jia-ding-yue">添加订阅</h4>
<p>订阅链接我们需要这么做，在项目文件的根目录下：</p>
<pre style="background-color:#1e1e1e;">
<code class="language-shell" data-lang="shell"><span style="color:#dcdcdc;">cd bin
node clash-node.js addSub
</span></code></pre>
<p>然后接下来根据提示完成订阅链接的添加即可。它看起来像这样：</p>
<p><img src="https://camo.githubusercontent.com/ee554091b16ceb6073636ffeb8949ce5274a08b7/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30342f32392f356363373030613234386633362e706e67" alt="订阅链接" /></p>
<p>这个时候链接的名称和链接地址以及节点信息，已经分别放到对应配置文件中了。</p>
<h4 id="geng-xin-ding-yue">更新订阅</h4>
<p>更新已经在配置文件中的订阅同样简单：</p>
<pre style="background-color:#1e1e1e;">
<code class="language-shell" data-lang="shell"><span style="color:#dcdcdc;">node clash-node.js updateSub
</span></code></pre><h3 id="yun-xing-clash">运行clash</h3>
<p>在我们更新订阅节点信息之后，我们就可以直接运行clash作为代理了。运行以下命令：</p>
<pre style="background-color:#1e1e1e;">
<code class="language-shell" data-lang="shell"><span style="color:#dcdcdc;">node clash-node.js start
</span></code></pre>
<p>这个时候应该就可以看到任务管理中有正在运行的clash了，打开<a href="https://blog.kingrong.kr/clash-node-instruction/www.google.com">google</a>试试。</p>
<p>关闭正在运行的clash进程:</p>
<pre style="background-color:#1e1e1e;">
<code class="language-shell" data-lang="shell"><span style="color:#dcdcdc;">node clash-node.js stop
</span></code></pre><h3 id="pei-zhi">配置</h3>
<p>配置和<a href="https://github.com/Dreamacro/clash">clash</a>的配置一样，你可以在<code>./config/config.yml</code>中配置除了<code>Proxy</code>、<code>Proxy Group</code>和<code>Rule</code>以外的配置，clash-node在运行的时候会读取这里的配置。</p>
<h2 id="gan-xie">感谢</h2>
<p><a href="https://github.com/Dreamacro/clash">Dreamacro/clash</a></p>
<h2 id="jie-shu">结束</h2>
<p>如果你有任何关于这个工具的想法或者建议，可以联系我，或者提request or issue</p>
<p><a href="https://github.com/kingrongH/clash-node">github</a></p>

    </div>

    
    <div class="article-info">
        
        <div class="article-date">13 May 2019</div>
        
        <div class="article-taxonomies">
            
                <ul class="article-categories">
                    
                    <li><a href="https://blog.kingrong.kr/categories/javascript/">JavaScript</a></li>
                    
                </ul>
            
            
                <ul class="article-tags">
                    
                    <li><a href="https://blog.kingrong.kr/tags/clash/">#clash</a></li>
                    
                    <li><a href="https://blog.kingrong.kr/tags/ssr/">#ssr</a></li>
                    
                    <li><a href="https://blog.kingrong.kr/tags/vmess/">#vmess</a></li>
                    
                    <li><a href="https://blog.kingrong.kr/tags/node/">#node</a></li>
                    
                </ul>
            
        </div>
    </div>


</article>


        </main>

        <div>
    <hr>
    <section>
        <h2>Comments</h2>
        
    <script src="https://utteranc.es/client.js"
        repo="kingrongH/blog.comments"
        issue-term="org:title"
        theme="boxy-light"
        crossorigin="anonymous"
        async>
    </script>

    </section>
</div>

        <footer>
            <p>
                © kingrong&#x27;s blog 2021
                | Powered by <a target="_blank" href="https://getzola.com/">Zola</a>, Theme <a target="_blank" href="https://github.com/zbrox/anpu-zola-theme">Anpu</a>.
            </p>
            <p>
                
                
            </p>
        </footer>
    </div>
</body>
</html>
